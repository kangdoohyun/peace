<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{usr/layout/default}">
<head>
    <title>제단꽃 주문정보</title>
    <th:block layout:fragment="js">
        <script type="text/javascript" src="/resource/vendor/order.js" charset="utf-8" defer></script>
    </th:block>
</head>
<main layout:fragment="main">
    <th:block th:each="order : ${orders}">
        <div>故 [[${order.extra__deceasedName}]]님의 장례</div>
        <br>
        <div>상주 성함 : [[${order.extra__relatedName}]]</div>
        <br>
        <div>장례지도사 성함 : [[${order.extra__directorName}]]</div>
        <br>
        <div>장례지도사 연락처 : [[${order.extra__directorCellphoneNo}]]</div>
        <br>
        <!-- 상품 이름과 가격은 리포지터리에서 MyBatis 동적 sql 통해서 roleCategoryId 값에따라 바뀌게 설정 -->
        <div>주문한 상품 이름 : [[${order.extra__name}]]</div>
        <br>
        <div>주문한 상품 가격 : [[${order.extra__retailPrice}]]</div>

        <!-- roleCategoryId 값에따라 출력할 이미지 변경 -->
        <th:block th:if="${order.roleCategoryId == 1}">
            <img th:src="@{../../../resource/img/flower/flower{flowerId}.png(flowerId = ${order.standardId})}" alt="" width="300px" height="150px">
        </th:block>
        <th:block th:if="${order.roleCategoryId == 2}">
            <img th:src="@{../../../resource/img/portrait/portrait{portraitId}.png(portraitId = ${order.standardId})}" alt="" width="300px" height="150px">
        </th:block>

        <form onsubmit="if(!confirm('제단꽃 배송이 완료되었습니까?')) return false; Complete__submit(this);">
            <input type="hidden" name="clientId" th:value="${order.clientId}">
            <button type="submit">배송 완료</button>
        </form>
    </th:block>
</main>

</html>