# 구현 규칙
  - 함수명
    - Insert : Insert[테이블명]
    - Select : get[테이블명]By[기준칼럼명]
    - Update : modify[테이블명]Into[칼럼명]And[칼럼명]...
    - Delete(UpdateDelStatus) : delete[테이블명]
  - memberRole 테이블의 roleCategoryId 칼럼
    1) vendor: roleId가 4인 경우
      - 1 = flower 테이블(제단꽃 공급업)
# 큰 틀
- 회원 관리
  - 최초 회원가입을 한 회원은 영업자의 권한만 가지고 있다.
    - 회원가입 정보 중 계좌 관련 정보를 입력 받아야한다.
    - 장례지도사 자격 인증, 사업자 등록을 통해서 다른 권한 레벨을 얻게 된다.
      - 이후, 다른 업종에 등록한 회원은 다른 등록은 할 수 없다.
        - 각 직업마다의 흐름이 있다.  
  - 장례지도사와 사업자는 자격 인증을 거쳐야한다.
    - 모든 인증 절차
      1) 장례지도사 - 자격증을 통한 인증에 대한 거절은 없으나, 승인을 보류할 수 있다.
      2) 다른 직업  - 승인만 존재한다. (약관 동의 및 정보 입력을 받기 위한 절차라고 할 수 있음)
  - 지역
    - 17개 시,도만 한다.
    - 회원가입 단계에서 입력받는 지역 데이터는 지역 별 영업자 수를 파악하기 위함.
  - 장례지도사
    - 장례지도사 자격증을 사진 파일로 가지고 있는다.
  - 인터셉터
    - AuthenticationStatusInterceptor를 모든 직업에 대해 통합
- 메인 페이지
  - 장례지도사 인증 버튼
  - 사업자 인증 버튼
  - 인력 정보 등록 버튼
  - 장례지도사 호출 버튼

# 구현된 것
- 회원가입
  - 정규표현식 적용 완료
  - 회원가입, 로그인 비밀번호 암호화 완료
- 영업자를 위한 페이지
  - 장례지도사 요청 페이지
  - 장례 진행 현황 페이지

# 구현할 것
- 장례지도사 출동 요청 페이지(고인, 상주 정보 입력 > 장례지도사 선택(검색) 또는 랜덤(지역별 리스팅))
- do로 시작하는 매소드들 AJax기능으로 변경하기
- 모든 Date 칼럼에 LocalDateTime 적용하기
- 회원가입 시, 핸드폰 명의를 통한 본인인증
- 결제 시스템
- 장례지도사 출동 요청 시, 해당된 장례지도사들에게 메세지 전달
- 조문객들을 위한 정보(장례식장 등) 필요한 정보가 다 얻어지는 시점에서 장례지도사가 입력 가능
  - 장례지도사가 상주에게 조문객을 위한 정보 페이지 URL을 전달.
    - URL 전달은 상주의 몫
# 에러 
# 전달 (읽은 후 지우면 됨)
- AuthenticationStatusInterceptor 하나로만 처리하려고 했을경우 발생하는 문제
  - 인터셉터 하나로 여러가지 권한을 가진 사용자를 한번에 처리할 수 없다.
    - 하나의 인터셉터로 처리했을 경우 장례지도사가 사업자의 모든 URL을 접속할수 있고, 반대로 사업자가 장례지도사의 모든 URL을 접속할 수 있게된다.
    - 이런 경우를 막기위해선 사업자랑 장례지도사의 인터셉터를 분리해야한다.
  - 인터셉터 하나로는 여러 개의 경우의 수를 막을 수 없다.
    - 현재 발생한 문제 : 
      - AuthenticationLevel = 0, 1, 2 인 회원은 request 페이지에 접근할 수 없어야한다.
      - AuthenticationLevel = null 인 회원은 request 페이지에 접근할 수 있어야하며, 그 외의 모든페이지(vendor, director로 시작하는)는 접근할 수 없어야한다.
      - AuthenticationLevel = 1 인 회원은 request 페이지에 접근할 수 없지만, 그외의 모든페이지(vendor, director로 시작하는)는 접근할 수 있어야한다
      - AuthenticationLevel = 0, 2 인 회원은 request 페이지를 포함한 모든페이지(vendor, director로 시작하는)에 접근할 수 없어야한다. (영업자보다 권한이 적은거임)
      - 해당 조건을 다 만족하는 하나의 인터셉터는 존재할 수 없다.
        - 인터셉터의 경우 Boolean타입과 다르지만 비슷하다 true 일 경우엔 인터셉터에서 if문을 통해 처리해줄 수 있지만, false 일 경우에는 해당 URL은 인터셉터 안으로 들어오지않는다
          - true : addPathPatterns, false : excludePathPatterns 
  - 결론 : 인터셉터는 순차적으로 실행되기때문에 Request 에 관련된 처리 담당 인터셉터를 하나 추가, Director 인터셉터 추가 Vendor 인터셉터 추가
    - Vendor, Director 인터셉터를 하나로 합쳐보려했지만 이럴경우엔 Vendor 가 Director 의 고유한 페이지에 접속할 수 있고, 반대의 경우도 가능하다.
    - 그게 가능한 이유 : 인터셉터에서 IF문으로 처리를 한다고해도, 결국은 인터페이스 내부에서 반환할 수 있는것도 true false 이다.
      - rq.printReplaceJs 를 이용해 메인페이지로 보내버리거나, super.preHandle(req, resp, handler) 로 접속을 허용하거나 둘중하나인데, Vendor 일경우엔 접속가능 Director 일 경우엔 접속 불가능한 로직을 만들려면 인터셉터 내부에서 URL에 관련된 설정을 해줘야하는데, WebMvcConfigurer 에서 URL을 지정해주기 때문에 불가능하다.
  